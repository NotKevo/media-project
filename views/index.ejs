<!DOCTYPE html>
<html data-bs-theme="dark">
  <head>
    <title><%= title %>: <%= subtitle %></title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.7/dist/ScrollTrigger.min.js"></script>
    <style>
      body {
        background: linear-gradient(
          -45deg,
          #6b6000,
          #0d3f71,
          #530045,
          #006f46
        );
        background-size: 400% 400%;
        animation: gradientAnimation 5s ease-in-out infinite;
      }

      @keyframes gradientAnimation {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }
    </style>
  </head>
  <body
    class="bg-dark text-light d-flex flex-column min-vh-100"
  >
    <form
      id="quizForm"
      action="/"
      method="post"
      class="container my-5 p-4 rounded-4 shadow"
      style="background-color: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);"
    >
      <header
        class="d-flex justify-content-between align-items-center mb-4"
      >
        <progress
          max="<%= questions.length %>"
          min="1"
          value="1"
          id="progressBar"
          class="form-control"
          style="width: 50%;"
        ></progress>
        <div class="d-flex gap-2">
          <label for="duration" title="duration in seconds">
            <input
              type="number"
              name="duration"
              id="duration"
              step="0.01"
              value="0"
              placeholder="⏱️"
              required
              class="form-control bg-transparent text-light border-light"
            />
          </label>
          <label for="points" title="points in total">
            <input
              type="number"
              name="points"
              id="points"
              max="<%- questions.length * scoreEachQuestion %>"
              value="0"
              placeholder="🌟"
              required
              class="form-control bg-transparent text-light border-light"
            />
          </label>
        </div>
      </header>
      <main class="mb-4">
        <fieldset
          class="p-3 rounded-3 mb-3"
          style="background-color: rgba(255, 255, 255, 0.05); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.1);"
        >
          <legend class="text-center">
            <h1 class="mb-3"><%= title %></h1>
            <h2 class="mb-3"><%= subtitle %></h2>
          </legend>
          <a
            href="#q1"
            rel="noopener noreferrer"
            class="btn btn-outline-light"
            >start quiz</a
          >
        </fieldset>
        <% for (let i = 0; i < questions.length; i++) { %>
        <fieldset
          id="q<%= i + 1 %>"
          class="p-3 rounded-3 mb-3"
          style="background-color: rgba(255, 255, 255, 0.05); backdrop-filter: blur(5px); border: 1px solid rgba(255, 255, 255, 0.1);"
        >
          <legend><%= questions[i].question %></legend>
          <% for (let j = 0; j < questions[i].options.length; j++) { %> <% const
          questionId = questions[i].question.toLowerCase().replace(/[^_\w]+/g,
          '_').replace(/^_+|_+$/g, ''); %> <% const optionId =
          questions[i].options[j].toLowerCase().replace(/[^_\w]+/g,
          '_').replace(/^_+|_+$/g, ''); %>
          <label
            for="<%= questionId %>-<%= optionId %>"
            class="d-block mb-2"
          >
            <input
              type="radio"
              accesskey="<%= j + 1 %>"
              name="<%= questionId %>"
              value="<%= optionId %>"
              id="<%= questionId %>-<%= optionId %>"
              required
              class="me-2"
            />
            <%= questions[i].options[j] %>
          </label>
          <% } %> <% if (i + 1 < questions.length) { %>
          <a
            href="#q<%= i + 2 %>"
            rel="noopener noreferrer"
            class="btn btn-outline-light"
            >continue</a
          >
          <% } else { %>
          <button type="submit" class="btn btn-light">Submit</button>
          <% } %>
        </fieldset>
        <% } %>
      </main>
    </form>
    <aside
      class="container my-5 p-4 rounded-4 shadow"
      style="background-color: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2);"
    >
      <h2 class="mb-3">Performance</h2>
      <section class="mb-2">Your score compare to others, e.g. 988/1000</section>
      <section class="mb-2">Your mistakes compare to others, e.g. 4/10</section>
      <section class="mb-2">Your time compare to others, e.g. 300 seconds</section>
      <section class="mb-2">Your accuracy compare to others, e.g. 30% correct</section>
    </aside>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.5/dist/js/bootstrap.bundle.min.js"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
